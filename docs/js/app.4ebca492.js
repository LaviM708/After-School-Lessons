(function(){"use strict";var e={2540:function(e,t,s){var o=s(3751),n=s(641),a=s(33);const l={key:0,class:"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{background:"rgba(0,0,0,0.4)","z-index":"1050"}},i={class:"bg-white rounded shadow p-4",style:{"min-width":"360px","max-width":"480px"}},c={class:"d-flex justify-content-between align-items-center mb-2"},r={class:"mb-0"},d={key:0},u={key:1},h={key:0},m={key:1,class:"text-muted"},p={key:2,class:"list-group mb-3",style:{"max-height":"260px","overflow-y":"auto"}},k={class:"flex-grow-1 me-3"},b={class:"small text-muted"},v={class:"d-flex align-items-center"},g=["onClick"],C={class:"mx-2"},y=["onClick"],f=["onClick"],L={class:"d-flex justify-content-center gap-2"},w=["disabled"],x={class:"container mt-3"},E={key:0},F={key:1},_={class:"mb-3"},A={key:2},X={class:"row"},P={class:"col-md-6"},j={key:0,class:"col-md-6"};function M(e,t,s,o,M,T){const q=(0,n.g2)("navbar"),I=(0,n.g2)("LessonList"),N=(0,n.g2)("Cart"),O=(0,n.g2)("Checkout");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(q,{pages:M.pages,"active-page":M.activePage,"nav-link-click":T.handleNavClick,cart:M.cart,onOpenCart:T.openCartFromIcon},null,8,["pages","active-page","nav-link-click","cart","onOpenCart"]),M.showAddedModal.visible?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",i,[(0,n.Lk)("div",c,[(0,n.Lk)("h5",r,[M.showAddedModal.fromCartIcon?((0,n.uX)(),(0,n.CE)("span",d,"Your cart")):((0,n.uX)(),(0,n.CE)("span",u,"Item added to cart"))]),(0,n.Lk)("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:t[0]||(t[0]=(...e)=>T.closeModal&&T.closeModal(...e))})]),!M.showAddedModal.fromCartIcon&&M.showAddedModal.lessonName?((0,n.uX)(),(0,n.CE)("p",h,[(0,n.Lk)("strong",null,(0,a.v_)(M.showAddedModal.lessonName),1),t[3]||(t[3]=(0,n.eW)(" has been added to your cart. ",-1))])):(0,n.Q3)("",!0),0===M.cart.length?((0,n.uX)(),(0,n.CE)("div",m," Your cart is empty. ")):((0,n.uX)(),(0,n.CE)("ul",p,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(M.cart,(e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:e.lesson._id||t,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,n.Lk)("div",k,[(0,n.Lk)("strong",null,(0,a.v_)(e.lesson.subject),1),(0,n.Lk)("div",b,(0,a.v_)(e.lesson.location),1)]),(0,n.Lk)("div",v,[(0,n.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:e=>T.decreaseQuantity(t)},"-",8,g),(0,n.Lk)("span",C,(0,a.v_)(e.quantity),1),(0,n.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:e=>T.increaseQuantity(t)},"+",8,y),(0,n.Lk)("button",{class:"btn btn-sm btn-outline-danger ms-2",onClick:e=>T.removeFromCart(t)}," Remove ",8,f)])]))),128))])),(0,n.Lk)("div",L,[(0,n.Lk)("button",{class:"btn btn-outline-secondary",onClick:t[1]||(t[1]=(...e)=>T.continueShoppingFromModal&&T.continueShoppingFromModal(...e))}," Continue shopping "),(0,n.Lk)("button",{class:"btn btn-primary",disabled:0===M.cart.length,onClick:t[2]||(t[2]=(...e)=>T.goToCheckoutFromModal&&T.goToCheckoutFromModal(...e))}," Go to checkout ",8,w)])])])):(0,n.Q3)("",!0),(0,n.Lk)("div",x,[0===M.activePage?((0,n.uX)(),(0,n.CE)("div",E,[(0,n.bF)(I,{page:M.pages[0],"add-to-cart":T.addToCart},null,8,["page","add-to-cart"])])):1===M.activePage?((0,n.uX)(),(0,n.CE)("div",F,[(0,n.Lk)("h1",_,(0,a.v_)(M.pages[1].pageTitle),1),(0,n.Lk)("p",null,(0,a.v_)(M.pages[1].content),1)])):2===M.activePage?((0,n.uX)(),(0,n.CE)("div",A,[t[5]||(t[5]=(0,n.Lk)("h1",{class:"mb-3"},"Checkout",-1)),(0,n.Lk)("div",X,[(0,n.Lk)("div",P,[(0,n.bF)(N,{cart:M.cart,onRemoveItem:T.removeFromCart,onIncreaseQty:T.increaseQuantity,onDecreaseQty:T.decreaseQuantity},null,8,["cart","onRemoveItem","onIncreaseQty","onDecreaseQty"])]),M.showCheckoutForm&&M.cart.length>0?((0,n.uX)(),(0,n.CE)("div",j,[t[4]||(t[4]=(0,n.Lk)("h2",{class:"h4 mb-3"},"Checkout",-1)),(0,n.bF)(O,{cart:M.cart,onCheckout:T.completeCheckout},null,8,["cart","onCheckout"])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)])])}s(4114),s(8111),s(116);const T={class:"navbar navbar-expand-lg navbar-light bg-light",style:{padding:"0.5rem 1.2rem","border-bottom":"1px solid #ddd"}},q={class:"container"},I={class:"navbar-nav me-auto mb-2 mb-lg-0"},N=["onClick"],O=["disabled"],Q={key:0,class:"badge rounded-pill bg-danger",style:{position:"absolute",top:"2px",right:"4px","font-size":"0.85rem","min-width":"18px"}};function $(e,t,s,l,i,c){return(0,n.uX)(),(0,n.CE)("nav",T,[(0,n.Lk)("div",q,[t[3]||(t[3]=(0,n.Lk)("a",{class:"navbar-brand fw-semibold",style:{"font-size":"1.55rem","font-weight":"600"}}," After School Lessons ",-1)),(0,n.Lk)("ul",I,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.pages,(e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t,class:"nav-item"},[(0,n.Lk)("a",{href:"#",class:(0,a.C4)(["nav-link",{active:s.activePage===t}]),onClick:(0,o.D$)(e=>s.navLinkClick(t),["prevent"]),style:{"font-size":"1.15rem","font-weight":"500"}},(0,a.v_)(e.link.text),11,N)]))),128))]),(0,n.Lk)("button",{class:"btn btn-light position-relative d-flex flex-column align-items-center justify-content-center",disabled:0===s.cart.length,onClick:t[0]||(t[0]=t=>e.$emit("open-cart")),style:{width:"80px",height:"80px","border-radius":"9999px",padding:"6px"}},[t[1]||(t[1]=(0,n.Lk)("i",{class:"bi bi-cart2",style:{"font-size":"2.1rem"}},null,-1)),t[2]||(t[2]=(0,n.Lk)("span",{style:{"font-size":"0.95rem","margin-top":"3px"}},"Cart",-1)),s.cart.length>0?((0,n.uX)(),(0,n.CE)("span",Q,(0,a.v_)(s.cart.length),1)):(0,n.Q3)("",!0)],8,O)])])}var S={name:"Navbar",props:["pages","activePage","navLinkClick","cart"]},V=s(6262);const D=(0,V.A)(S,[["render",$]]);var K=D;const z={class:"container mt-4"},U={class:"mb-4"},R={class:"row mb-3"},J={class:"col-md-4"},Y={class:"col-md-4"},G={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},W={class:"card h-100 shadow-sm"},Z=["src","alt"],B={class:"card-body"},H={class:"card-title"},ee={class:"card-text text-muted mb-2"},te={class:"mb-2"},se=["onClick","disabled"];function oe(e,t,s,l,i,c){return(0,n.uX)(),(0,n.CE)("div",z,[(0,n.Lk)("h1",U,(0,a.v_)(s.page.pageTitle),1),(0,n.Lk)("div",R,[(0,n.Lk)("div",J,[t[3]||(t[3]=(0,n.Lk)("label",{class:"form-label"},"Sort by",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.sortKey=e),class:"form-select"},[...t[2]||(t[2]=[(0,n.Lk)("option",{value:"subject"},"Subject",-1),(0,n.Lk)("option",{value:"location"},"Location",-1),(0,n.Lk)("option",{value:"price"},"Price",-1),(0,n.Lk)("option",{value:"spaces"},"Spaces",-1)])],512),[[o.u1,i.sortKey]])]),(0,n.Lk)("div",Y,[t[5]||(t[5]=(0,n.Lk)("label",{class:"form-label"},"Order",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.sortDir=e),class:"form-select"},[...t[4]||(t[4]=[(0,n.Lk)("option",{value:"asc"},"Ascending",-1),(0,n.Lk)("option",{value:"desc"},"Descending",-1)])],512),[[o.u1,i.sortDir]])])]),(0,n.Lk)("div",G,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.sortedLessons,e=>((0,n.uX)(),(0,n.CE)("div",{class:"col",key:e._id},[(0,n.Lk)("div",W,[(0,n.Lk)("img",{src:e.image,class:"card-img-top",alt:e.subject,style:{height:"180px",width:"100%","object-fit":"contain","background-color":"#f8f9fa"}},null,8,Z),(0,n.Lk)("div",B,[(0,n.Lk)("h5",H,(0,a.v_)(e.subject),1),(0,n.Lk)("p",ee,(0,a.v_)(e.location),1),(0,n.Lk)("p",te,[(0,n.Lk)("strong",null,"£"+(0,a.v_)(e.price),1),t[6]||(t[6]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("small",null,"Spaces: "+(0,a.v_)(e.spaces),1)]),(0,n.Lk)("button",{class:"btn btn-primary w-100",onClick:t=>s.addToCart(e),disabled:0===e.spaces}," Add to Cart ",8,se)])])]))),128))])])}s(1701);const ne="https://backend-afterschoollessons.onrender.com";var ae={name:"LessonList",props:["page","addToCart"],data(){return{lessons:[],sortKey:"subject",sortDir:"asc"}},async mounted(){const e=await fetch(`${ne}/api/lessons`),t=await e.json();if(!Array.isArray(t))return console.error("Expected an array of lessons, got:",t),void(this.lessons=[]);this.lessons=t.map(e=>({_id:e._id,subject:e.topic,location:e.location,price:e.price,spaces:e.space,image:`${ne}/images/${e.topic.toLowerCase().replace(/\s+/g,"-")}.png`}))},computed:{sortedLessons(){const e=this.sortKey,t="asc"===this.sortDir?1:-1;return this.lessons.slice().sort((s,o)=>{const n=s[e],a=o[e];return n<a?-1*t:n>a?1*t:0})}}};const le=(0,V.A)(ae,[["render",oe]]);var ie=le;const ce={class:"container mt-4"},re={key:0,class:"text-muted"},de={key:1,class:"list-group"},ue={class:"flex-grow-1 me-3"},he={class:"small text-muted"},me={class:"d-flex align-items-center"},pe=["onClick"],ke={class:"mx-2"},be=["onClick"],ve=["onClick"],ge={class:"list-group-item d-flex justify-content-between"};function Ce(e,t,s,o,l,i){return(0,n.uX)(),(0,n.CE)("div",ce,[t[1]||(t[1]=(0,n.Lk)("h2",{class:"mb-3"},"Cart",-1)),0===s.cart.length?((0,n.uX)(),(0,n.CE)("p",re," Your cart is empty. ")):((0,n.uX)(),(0,n.CE)("ul",de,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.cart,(t,s)=>((0,n.uX)(),(0,n.CE)("li",{key:t.lesson._id||s,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,n.Lk)("div",ue,[(0,n.Lk)("strong",null,(0,a.v_)(t.lesson.subject),1),(0,n.Lk)("div",he,(0,a.v_)(t.lesson.location),1)]),(0,n.Lk)("div",me,[(0,n.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t=>e.$emit("decrease-qty",s)},"−",8,pe),(0,n.Lk)("span",ke,(0,a.v_)(t.quantity),1),(0,n.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t=>e.$emit("increase-qty",s)},"+",8,be),(0,n.Lk)("button",{class:"btn btn-sm btn-outline-danger ms-2",onClick:t=>e.$emit("remove-item",s)}," Remove ",8,ve)])]))),128)),(0,n.Lk)("li",ge,[t[0]||(t[0]=(0,n.Lk)("strong",null,"Total",-1)),(0,n.Lk)("span",null,"£"+(0,a.v_)(i.totalPrice.toFixed(2)),1)])]))])}s(8237);var ye={name:"Cart",props:["cart"],emits:["remove-item","increase-qty","decrease-qty"],computed:{totalPrice(){return Array.isArray(this.cart)?this.cart.reduce((e,t)=>{const s=Number(t.lesson.price)||0,o=Number(t.quantity)||0;return e+s*o},0):0}}};const fe=(0,V.A)(ye,[["render",Ce]]);var Le=fe;const we={class:"mt-4"},xe={class:"mb-3"},Ee={key:0,class:"text-danger"},Fe={class:"mb-3"},_e={key:0,class:"text-danger"},Ae=["disabled"];function Xe(e,t,s,a,l,i){return(0,n.uX)(),(0,n.CE)("div",we,[t[5]||(t[5]=(0,n.Lk)("h3",{class:"mb-3"},"Checkout",-1)),(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,o.D$)((...e)=>i.handleCheckout&&i.handleCheckout(...e),["prevent"]))},[(0,n.Lk)("div",xe,[t[3]||(t[3]=(0,n.Lk)("label",{class:"form-label"},"Full Name",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.name=e),type:"text",class:"form-control",placeholder:"Enter your full name",required:""},null,512),[[o.Jo,l.name]]),l.name&&!i.isNameValid?((0,n.uX)(),(0,n.CE)("small",Ee," Name must contain letters only. ")):(0,n.Q3)("",!0)]),(0,n.Lk)("div",Fe,[t[4]||(t[4]=(0,n.Lk)("label",{class:"form-label"},"Phone Number",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.phone=e),type:"text",class:"form-control",placeholder:"Enter your phone number",required:""},null,512),[[o.Jo,l.phone]]),l.phone&&!i.isPhoneValid?((0,n.uX)(),(0,n.CE)("small",_e," Phone must contain numbers only. ")):(0,n.Q3)("",!0)]),(0,n.Lk)("button",{type:"submit",class:"btn btn-primary w-100",disabled:!i.isNameValid||!i.isPhoneValid||0===s.cart.length}," Checkout ",8,Ae)],32)])}var Pe={name:"Checkout",props:["cart"],emits:["checkout"],data(){return{name:"",phone:""}},computed:{isNameValid(){return/^[A-Za-z\s]+$/.test(this.name)},isPhoneValid(){return/^[0-9]+$/.test(this.phone)}},methods:{async handleCheckout(){const e="https://backend-afterschoollessons.onrender.com",t={name:this.name,phone:this.phone,items:this.cart.map(e=>({lessonId:e.lesson._id,spaces:e.quantity}))};await fetch(`${e}/api/order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});for(const s of this.cart){const{lesson:t,quantity:o}=s;for(let s=0;s<o;s++)await fetch(`${e}/api/lesson/${t._id}/decrease`,{method:"PUT"})}this.$emit("checkout")}}};const je=(0,V.A)(Pe,[["render",Xe]]);var Me=je,Te={components:{Navbar:K,LessonList:ie,Cart:Le,Checkout:Me},data(){return{activePage:0,cart:[],showCheckoutForm:!1,showAddedModal:{visible:!1,lessonName:"",fromCartIcon:!1},pages:[{link:{text:"Lessons",url:"LessonList.vue"},pageTitle:"Lessons List",content:"This is the list of lessons"},{link:{text:"About",url:"about.html"},pageTitle:"About",content:"This is the about content"}]}},methods:{handleNavClick(e){this.activePage=e,this.showCheckoutForm=!1},async addToCart(e){const t=0===this.cart.length,s=this.cart.find(t=>t.lesson._id===e._id);e.spaces>0&&(s?s.quantity+=1:this.cart.push({lesson:e,quantity:1}),e.spaces--),t&&this.cart.length>0&&(this.showAddedModal.visible=!0,this.showAddedModal.lessonName=e.subject,this.showAddedModal.fromCartIcon=!1)},async removeFromCart(e){const t=this.cart[e],s=t.lesson;s.spaces+=t.quantity,this.cart.splice(e,1),0===this.cart.length&&2===this.activePage&&(this.activePage=0,this.showCheckoutForm=!1)},increaseQuantity(e){const t=this.cart[e],s=t.lesson;s.spaces>0&&(t.quantity+=1,s.spaces--)},decreaseQuantity(e){const t=this.cart[e],s=t.lesson;t.quantity>1?(t.quantity-=1,s.spaces++):this.removeFromCart(e)},startCheckout(){this.cart.length>0&&(this.showCheckoutForm=!0)},continueShopping(){this.activePage=0,this.showCheckoutForm=!1},completeCheckout(){alert("Order complete!"),this.cart=[],this.activePage=0,this.showCheckoutForm=!1},closeModal(){this.showAddedModal.visible=!1},continueShoppingFromModal(){this.showAddedModal.visible=!1,this.activePage=0,this.showCheckoutForm=!1},goToCheckoutFromModal(){this.cart.length&&(this.showAddedModal.visible=!1,this.activePage=2,this.showCheckoutForm=!0)},openCartFromIcon(){this.cart.length&&(this.showAddedModal.visible=!0,this.showAddedModal.fromCartIcon=!0)}}};const qe=(0,V.A)(Te,[["render",M]]);var Ie=qe;(0,o.Ef)(Ie).mount("#app")}},t={};function s(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,o,n,a){if(!o){var l=1/0;for(d=0;d<e.length;d++){o=e[d][0],n=e[d][1],a=e[d][2];for(var i=!0,c=0;c<o.length;c++)(!1&a||l>=a)&&Object.keys(s.O).every(function(e){return s.O[e](o[c])})?o.splice(c--,1):(i=!1,a<l&&(l=a));if(i){e.splice(d--,1);var r=n();void 0!==r&&(t=r)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,n,a]}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,a,l=o[0],i=o[1],c=o[2],r=0;if(l.some(function(t){return 0!==e[t]})){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(c)var d=c(s)}for(t&&t(o);r<l.length;r++)a=l[r],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},o=self["webpackChunkafter_school_lessons"]=self["webpackChunkafter_school_lessons"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],function(){return s(2540)});o=s.O(o)})();
//# sourceMappingURL=app.4ebca492.js.map