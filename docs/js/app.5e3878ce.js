(function(){"use strict";var e={7202:function(e,t,s){var a=s(3751),n=s(641),o=s(33);const c={class:"container mt-3"},r={key:0},l={key:1},i={class:"mb-3"},u={key:2},d={class:"mb-3"},p={class:"row"},h={class:"col-md-7"},m={class:"col-md-5"};function k(e,t,s,a,k,v){const g=(0,n.g2)("navbar"),b=(0,n.g2)("LessonList"),f=(0,n.g2)("Cart"),L=(0,n.g2)("Checkout");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(g,{pages:k.pages,"active-page":k.activePage,"nav-link-click":v.changePage,cart:k.cart,onToggleCheckout:v.goToCheckout},null,8,["pages","active-page","nav-link-click","cart","onToggleCheckout"]),(0,n.Lk)("div",c,[0===k.activePage?((0,n.uX)(),(0,n.CE)("div",r,[(0,n.bF)(b,{page:k.pages[0],"add-to-cart":v.addToCart},null,8,["page","add-to-cart"])])):1===k.activePage?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("h1",i,(0,o.v_)(k.pages[1].pageTitle),1),(0,n.Lk)("p",null,(0,o.v_)(k.pages[1].content),1)])):2===k.activePage?((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("h1",d,(0,o.v_)(k.pages[2].pageTitle),1),(0,n.Lk)("div",p,[(0,n.Lk)("div",h,[(0,n.bF)(f,{cart:k.cart,onRemoveItem:v.removeFromCart},null,8,["cart","onRemoveItem"])]),(0,n.Lk)("div",m,[(0,n.bF)(L,{cart:k.cart,onCheckout:v.completeCheckout},null,8,["cart","onCheckout"])])])])):(0,n.Q3)("",!0)])])}s(4114);const v={class:"navbar navbar-expand-lg navbar-light bg-light",style:{padding:"0.5rem 1.2rem","border-bottom":"1px solid #ddd"}},g={class:"container"},b={class:"navbar-nav me-auto mb-2 mb-lg-0"},f=["onClick"],L=["disabled"],C={key:0,class:"badge rounded-pill bg-danger",style:{position:"absolute",top:"2px",right:"4px","font-size":"0.85rem","min-width":"18px"}};function y(e,t,s,c,r,l){return(0,n.uX)(),(0,n.CE)("nav",v,[(0,n.Lk)("div",g,[t[3]||(t[3]=(0,n.Lk)("a",{class:"navbar-brand fw-semibold",style:{"font-size":"1.55rem","font-weight":"600"}}," After School Lessons ",-1)),(0,n.Lk)("ul",b,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.pages,(e,t)=>((0,n.uX)(),(0,n.CE)("li",{key:t,class:"nav-item"},[(0,n.Lk)("a",{href:"#",class:(0,o.C4)(["nav-link",{active:s.activePage===t}]),onClick:(0,a.D$)(e=>s.navLinkClick(t),["prevent"]),style:{"font-size":"1.15rem","font-weight":"500"}},(0,o.v_)(e.link.text),11,f)]))),128))]),(0,n.Lk)("button",{class:"btn btn-light position-relative d-flex flex-column align-items-center justify-content-center",disabled:0===s.cart.length,onClick:t[0]||(t[0]=t=>e.$emit("toggle-checkout")),style:{width:"80px",height:"80px","border-radius":"9999px",padding:"6px"}},[t[1]||(t[1]=(0,n.Lk)("i",{class:"bi bi-cart2",style:{"font-size":"2.1rem"}},null,-1)),t[2]||(t[2]=(0,n.Lk)("span",{style:{"font-size":"0.95rem","margin-top":"3px"}},"Cart",-1)),s.cart.length>0?((0,n.uX)(),(0,n.CE)("span",C,(0,o.v_)(s.cart.length),1)):(0,n.Q3)("",!0)],8,L)])])}var x={name:"Navbar",props:["pages","activePage","navLinkClick","cart"]},w=s(6262);const T=(0,w.A)(x,[["render",y]]);var P=T;const E={class:"container mt-4"},_={class:"mb-4"},j={class:"row mb-3"},X={class:"col-md-4"},O={class:"col-md-4"},A={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},$={class:"card h-100 shadow-sm"},F=["src","alt"],V={class:"card-body"},N={class:"card-title"},S={class:"card-text text-muted mb-2"},D={class:"mb-2"},K=["onClick","disabled"];function z(e,t,s,c,r,l){return(0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("h1",_,(0,o.v_)(s.page.pageTitle),1),(0,n.Lk)("div",j,[(0,n.Lk)("div",X,[t[3]||(t[3]=(0,n.Lk)("label",{class:"form-label"},"Sort by",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.sortKey=e),class:"form-select"},[...t[2]||(t[2]=[(0,n.Lk)("option",{value:"subject"},"Subject",-1),(0,n.Lk)("option",{value:"location"},"Location",-1),(0,n.Lk)("option",{value:"price"},"Price",-1),(0,n.Lk)("option",{value:"spaces"},"Spaces",-1)])],512),[[a.u1,r.sortKey]])]),(0,n.Lk)("div",O,[t[5]||(t[5]=(0,n.Lk)("label",{class:"form-label"},"Order",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.sortDir=e),class:"form-select"},[...t[4]||(t[4]=[(0,n.Lk)("option",{value:"asc"},"Ascending",-1),(0,n.Lk)("option",{value:"desc"},"Descending",-1)])],512),[[a.u1,r.sortDir]])])]),(0,n.Lk)("div",A,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.sortedLessons,e=>((0,n.uX)(),(0,n.CE)("div",{class:"col",key:e._id},[(0,n.Lk)("div",$,[(0,n.Lk)("img",{src:e.image,class:"card-img-top",alt:e.subject,style:{height:"180px",width:"100%","object-fit":"contain","background-color":"#f8f9fa"}},null,8,F),(0,n.Lk)("div",V,[(0,n.Lk)("h5",N,(0,o.v_)(e.subject),1),(0,n.Lk)("p",S,(0,o.v_)(e.location),1),(0,n.Lk)("p",D,[(0,n.Lk)("strong",null,"£"+(0,o.v_)(e.price),1),t[6]||(t[6]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("small",null,"Spaces: "+(0,o.v_)(e.spaces),1)]),(0,n.Lk)("button",{class:"btn btn-primary w-100",onClick:t=>s.addToCart(e),disabled:0===e.spaces}," Add to Cart ",8,K)])])]))),128))])])}s(8111),s(1701);const I="https://backend-afterschoollessons.onrender.com";var U={name:"LessonList",props:["page","addToCart"],data(){return{lessons:[],sortKey:"subject",sortDir:"asc"}},async mounted(){const e=await fetch(`${I}/api/lessons`),t=await e.json();if(!Array.isArray(t))return console.error("Expected an array of lessons, got:",t),void(this.lessons=[]);this.lessons=t.map(e=>({_id:e._id,subject:e.topic,location:e.location,price:e.price,spaces:e.space,image:`${I}/images/${e.topic.toLowerCase().replace(/\s+/g,"-")}.png`}))},computed:{sortedLessons(){const e=this.sortKey,t="asc"===this.sortDir?1:-1;return this.lessons.slice().sort((s,a)=>{const n=s[e],o=a[e];return n<o?-1*t:n>o?1*t:0})}}};const Q=(0,w.A)(U,[["render",z]]);var J=Q;const R={class:"container mt-4"},q={key:0,class:"text-muted"},Y={key:1,class:"list-group"},Z={class:"small text-muted"},B={class:"d-flex align-items-center gap-2"},G=["onClick"],H={class:"list-group-item d-flex justify-content-between"};function M(e,t,s,a,c,r){return(0,n.uX)(),(0,n.CE)("div",R,[t[1]||(t[1]=(0,n.Lk)("h2",{class:"mb-3"},"Cart",-1)),0===s.cart.length?((0,n.uX)(),(0,n.CE)("p",q," Your cart is empty. ")):((0,n.uX)(),(0,n.CE)("ul",Y,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.cart,(t,s)=>((0,n.uX)(),(0,n.CE)("li",{key:s,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,n.Lk)("div",null,[(0,n.Lk)("strong",null,(0,o.v_)(t.subject),1),(0,n.Lk)("div",Z,(0,o.v_)(t.location),1)]),(0,n.Lk)("div",B,[(0,n.Lk)("span",null,"£"+(0,o.v_)(t.price),1),(0,n.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:t=>e.$emit("remove-item",s)}," Remove ",8,G)])]))),128)),(0,n.Lk)("li",H,[t[0]||(t[0]=(0,n.Lk)("strong",null,"Total",-1)),(0,n.Lk)("strong",null,"£"+(0,o.v_)(r.cartTotal),1)])]))])}s(8237);var W={name:"Cart",props:["cart"],emits:["remove-item"],computed:{cartTotal(){return this.cart.reduce((e,t)=>e+t.price,0)}}};const ee=(0,w.A)(W,[["render",M]]);var te=ee;const se={class:"mt-4"},ae={class:"mb-3"},ne={key:0,class:"text-danger"},oe={class:"mb-3"},ce={key:0,class:"text-danger"},re=["disabled"];function le(e,t,s,o,c,r){return(0,n.uX)(),(0,n.CE)("div",se,[t[5]||(t[5]=(0,n.Lk)("h3",{class:"mb-3"},"Checkout",-1)),(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,a.D$)((...e)=>r.handleCheckout&&r.handleCheckout(...e),["prevent"]))},[(0,n.Lk)("div",ae,[t[3]||(t[3]=(0,n.Lk)("label",{class:"form-label"},"Full Name",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.name=e),type:"text",class:"form-control",placeholder:"Enter your full name",required:""},null,512),[[a.Jo,c.name]]),c.name&&!r.isNameValid?((0,n.uX)(),(0,n.CE)("small",ne," Name must contain letters only. ")):(0,n.Q3)("",!0)]),(0,n.Lk)("div",oe,[t[4]||(t[4]=(0,n.Lk)("label",{class:"form-label"},"Phone Number",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>c.phone=e),type:"text",class:"form-control",placeholder:"Enter your phone number",required:""},null,512),[[a.Jo,c.phone]]),c.phone&&!r.isPhoneValid?((0,n.uX)(),(0,n.CE)("small",ce," Phone must contain numbers only. ")):(0,n.Q3)("",!0)]),(0,n.Lk)("button",{type:"submit",class:"btn btn-primary w-100",disabled:!r.isNameValid||!r.isPhoneValid||0===s.cart.length}," Checkout ",8,re)],32)])}var ie={name:"Checkout",props:["cart"],emits:["checkout"],data(){return{name:"",phone:""}},computed:{isNameValid(){return/^[A-Za-z\s]+$/.test(this.name)},isPhoneValid(){return/^[0-9]+$/.test(this.phone)}},methods:{async handleCheckout(){const e={name:this.name,phone:this.phone,items:this.cart.map(e=>({lessonId:e._id,spaces:1}))};await fetch("http://localhost:3000/api/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),this.$emit("checkout")}}};const ue=(0,w.A)(ie,[["render",le]]);var de=ue,pe={components:{Navbar:P,LessonList:J,Cart:te,Checkout:de},data(){return{activePage:0,cart:[],pages:[{link:{text:"Lessons",url:"LessonList.vue"},pageTitle:"Lessons List",content:"This is the list of lessons"},{link:{text:"About",url:"about.html"},pageTitle:"About",content:"This is the about content"},{link:{text:"Checkout",url:"Checkout.vue"},pageTitle:"Checkout",content:"This is the Checkout"}]}},methods:{changePage(e){this.activePage=e},async addToCart(e){this.cart.push(e),await fetch(`https://backend-afterschoollessons.onrender.com/api/lesson/${e._id}/decrease`,{method:"PUT"}),e.spaces--},goToCheckout(){this.cart.length>0&&(this.activePage=2)},async removeFromCart(e){const t=this.cart[e];await fetch(`https://backend-afterschoollessons.onrender.com/api/lesson/${t._id}/increase`,{method:"PUT"}),t.spaces++,this.cart.splice(e,1),0===this.cart.length&&2===this.activePage&&(this.activePage=0)},completeCheckout(){alert("Order complete!"),this.cart=[],this.activePage=0}}};const he=(0,w.A)(pe,[["render",k]]);var me=he;(0,a.Ef)(me).mount("#app")}},t={};function s(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,a,n,o){if(!a){var c=1/0;for(u=0;u<e.length;u++){a=e[u][0],n=e[u][1],o=e[u][2];for(var r=!0,l=0;l<a.length;l++)(!1&o||c>=o)&&Object.keys(s.O).every(function(e){return s.O[e](a[l])})?a.splice(l--,1):(r=!1,o<c&&(c=o));if(r){e.splice(u--,1);var i=n();void 0!==i&&(t=i)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,n,o]}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,o,c=a[0],r=a[1],l=a[2],i=0;if(c.some(function(t){return 0!==e[t]})){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(l)var u=l(s)}for(t&&t(a);i<c.length;i++)o=c[i],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},a=self["webpackChunkafter_school_lessons"]=self["webpackChunkafter_school_lessons"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],function(){return s(7202)});a=s.O(a)})();
//# sourceMappingURL=app.5e3878ce.js.map