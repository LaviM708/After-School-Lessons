(function(){"use strict";var t={789:function(t,e,a){var s=a(3751),o=a(641),n=a(33);const l={class:"container mt-4"},r={class:"row"},c={key:0,class:"col-md-4"};function i(t,e,a,s,i,u){const d=(0,o.g2)("navbar"),p=(0,o.g2)("LessonList"),h=(0,o.g2)("Cart"),k=(0,o.g2)("Checkout");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(d,{pages:i.pages,"active-page":i.activePage,"nav-link-click":t=>i.activePage=t,cart:i.cart,onToggleCheckout:u.toggleCheckout},null,8,["pages","active-page","nav-link-click","cart","onToggleCheckout"]),(0,o.Lk)("div",l,[(0,o.Lk)("div",r,[(0,o.Lk)("div",{class:(0,n.C4)(i.showCartPage?"col-md-8":"col-12")},[(0,o.bF)(p,{page:i.pages[i.activePage],"add-to-cart":u.addToCart},null,8,["page","add-to-cart"])],2),i.showCartPage?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.bF)(h,{cart:i.cart,onRemoveItem:u.removeFromCart},null,8,["cart","onRemoveItem"]),(0,o.bF)(k,{cart:i.cart,onCheckout:u.completeCheckout},null,8,["cart","onCheckout"])])):(0,o.Q3)("",!0)])])])}a(4114);const u={class:"navbar navbar-expand-lg navbar-dark bg-dark"},d={class:"container-fluid"},p={class:"collapse navbar-collapse justify-content-between",id:"navbarNav"},h={class:"navbar-nav"},k=["href","title","onClick"],m={class:"d-flex ms-auto"},v=["disabled"];function b(t,e,a,l,r,c){return(0,o.uX)(),(0,o.CE)("nav",u,[(0,o.Lk)("div",d,[e[1]||(e[1]=(0,o.Lk)("a",{class:"navbar-brand",href:"#"},"After School Lessons",-1)),e[2]||(e[2]=(0,o.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,o.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,o.Lk)("div",p,[(0,o.Lk)("ul",h,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.pages,(t,e)=>((0,o.uX)(),(0,o.CE)("li",{class:"nav-item",key:e},[(0,o.Lk)("a",{class:(0,n.C4)(["nav-link",{active:a.activePage==e}]),"aria-current":"page",href:t.link.url,title:`This link goes to the ${t.link.text} page`,onClick:(0,s.D$)(t=>a.navLinkClick(e),["prevent"])},(0,n.v_)(t.link.text),11,k)]))),128))]),(0,o.Lk)("div",m,[(0,o.Lk)("button",{class:"btn btn-success",type:"button",disabled:0===a.cart.length,onClick:e[0]||(e[0]=e=>t.$emit("toggle-checkout"))}," Cart ("+(0,n.v_)(a.cart.length)+") ",9,v)])])])])}var g={props:["pages","activePage","navLinkClick","cart"],emits:["toggle-checkout"]},f=a(6262);const L=(0,f.A)(g,[["render",b]]);var C=L;const y={class:"container mt-4"},w={class:"mb-4"},x={class:"row mb-3"},T={class:"col-md-4"},P={class:"col-md-4"},E={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},_={class:"card h-100 shadow-sm"},j=["src","alt"],X={class:"card-body"},O={class:"card-title"},A={class:"card-text text-muted mb-2"},F={class:"mb-2"},N=["onClick","disabled"];function $(t,e,a,l,r,c){return(0,o.uX)(),(0,o.CE)("div",y,[(0,o.Lk)("h1",w,(0,n.v_)(a.page.pageTitle),1),(0,o.Lk)("div",x,[(0,o.Lk)("div",T,[e[3]||(e[3]=(0,o.Lk)("label",{class:"form-label"},"Sort by",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.sortKey=t),class:"form-select"},[...e[2]||(e[2]=[(0,o.Lk)("option",{value:"subject"},"Subject",-1),(0,o.Lk)("option",{value:"location"},"Location",-1),(0,o.Lk)("option",{value:"price"},"Price",-1),(0,o.Lk)("option",{value:"spaces"},"Spaces",-1)])],512),[[s.u1,r.sortKey]])]),(0,o.Lk)("div",P,[e[5]||(e[5]=(0,o.Lk)("label",{class:"form-label"},"Order",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.sortDir=t),class:"form-select"},[...e[4]||(e[4]=[(0,o.Lk)("option",{value:"asc"},"Ascending",-1),(0,o.Lk)("option",{value:"desc"},"Descending",-1)])],512),[[s.u1,r.sortDir]])])]),(0,o.Lk)("div",E,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(c.sortedLessons,t=>((0,o.uX)(),(0,o.CE)("div",{class:"col",key:t._id},[(0,o.Lk)("div",_,[(0,o.Lk)("img",{src:t.image,class:"card-img-top",alt:t.subject,style:{height:"180px",width:"100%","object-fit":"contain","background-color":"#f8f9fa"}},null,8,j),(0,o.Lk)("div",X,[(0,o.Lk)("h5",O,(0,n.v_)(t.subject),1),(0,o.Lk)("p",A,(0,n.v_)(t.location),1),(0,o.Lk)("p",F,[(0,o.Lk)("strong",null,"£"+(0,n.v_)(t.price),1),e[6]||(e[6]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("small",null,"Spaces: "+(0,n.v_)(t.spaces),1)]),(0,o.Lk)("button",{class:"btn btn-primary w-100",onClick:e=>a.addToCart(t),disabled:0===t.spaces}," Add to Cart ",8,N)])])]))),128))])])}a(8111),a(1701);var V={name:"LessonList",props:["page","addToCart"],data(){return{lessons:[],sortKey:"subject",sortDir:"asc"}},async mounted(){const t=await fetch("http://localhost:3000/api/lessons"),e=await t.json();if(!Array.isArray(e))return console.error("Expected an array of lessons, got:",e),void(this.lessons=[]);this.lessons=e.map(t=>({_id:t._id,subject:t.topic,location:t.location,price:t.price,spaces:t.space,image:`http://localhost:3000/images/${t.topic.toLowerCase().replace(/\s+/g,"-")}.png`}))},computed:{sortedLessons(){const t=this.sortKey,e="asc"===this.sortDir?1:-1;return this.lessons.slice().sort((a,s)=>{const o=a[t],n=s[t];return o<n?-1*e:o>n?1*e:0})}}};const S=(0,f.A)(V,[["render",$]]);var D=S;const K={class:"container mt-4"},I={key:0,class:"text-muted"},U={key:1,class:"list-group"},J={class:"small text-muted"},Q={class:"d-flex align-items-center gap-2"},R=["onClick"],q={class:"list-group-item d-flex justify-content-between"};function z(t,e,a,s,l,r){return(0,o.uX)(),(0,o.CE)("div",K,[e[1]||(e[1]=(0,o.Lk)("h2",{class:"mb-3"},"Cart",-1)),0===a.cart.length?((0,o.uX)(),(0,o.CE)("p",I," Your cart is empty. ")):((0,o.uX)(),(0,o.CE)("ul",U,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.cart,(e,a)=>((0,o.uX)(),(0,o.CE)("li",{key:a,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,o.Lk)("div",null,[(0,o.Lk)("strong",null,(0,n.v_)(e.subject),1),(0,o.Lk)("div",J,(0,n.v_)(e.location),1)]),(0,o.Lk)("div",Q,[(0,o.Lk)("span",null,"£"+(0,n.v_)(e.price),1),(0,o.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:e=>t.$emit("remove-item",a)}," Remove ",8,R)])]))),128)),(0,o.Lk)("li",q,[e[0]||(e[0]=(0,o.Lk)("strong",null,"Total",-1)),(0,o.Lk)("strong",null,"£"+(0,n.v_)(r.cartTotal),1)])]))])}a(8237);var Y={name:"Cart",props:["cart"],emits:["remove-item"],computed:{cartTotal(){return this.cart.reduce((t,e)=>t+e.price,0)}}};const Z=(0,f.A)(Y,[["render",z]]);var B=Z;const G={class:"mt-4"},H={class:"mb-3"},M={key:0,class:"text-danger"},W={class:"mb-3"},tt={key:0,class:"text-danger"},et=["disabled"];function at(t,e,a,n,l,r){return(0,o.uX)(),(0,o.CE)("div",G,[e[5]||(e[5]=(0,o.Lk)("h3",{class:"mb-3"},"Checkout",-1)),(0,o.Lk)("form",{onSubmit:e[2]||(e[2]=(0,s.D$)((...t)=>r.handleCheckout&&r.handleCheckout(...t),["prevent"]))},[(0,o.Lk)("div",H,[e[3]||(e[3]=(0,o.Lk)("label",{class:"form-label"},"Full Name",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.name=t),type:"text",class:"form-control",placeholder:"Enter your full name",required:""},null,512),[[s.Jo,l.name]]),l.name&&!r.isNameValid?((0,o.uX)(),(0,o.CE)("small",M," Name must contain letters only. ")):(0,o.Q3)("",!0)]),(0,o.Lk)("div",W,[e[4]||(e[4]=(0,o.Lk)("label",{class:"form-label"},"Phone Number",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.phone=t),type:"text",class:"form-control",placeholder:"Enter your phone number",required:""},null,512),[[s.Jo,l.phone]]),l.phone&&!r.isPhoneValid?((0,o.uX)(),(0,o.CE)("small",tt," Phone must contain numbers only. ")):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary w-100",disabled:!r.isNameValid||!r.isPhoneValid||0===a.cart.length}," Checkout ",8,et)],32)])}var st={name:"Checkout",props:["cart"],emits:["checkout"],data(){return{name:"",phone:""}},computed:{isNameValid(){return/^[A-Za-z\s]+$/.test(this.name)},isPhoneValid(){return/^[0-9]+$/.test(this.phone)}},methods:{async handleCheckout(){const t={name:this.name,phone:this.phone,items:this.cart.map(t=>({lessonId:t._id,spaces:1}))};await fetch("http://localhost:3000/api/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),this.$emit("checkout")}}};const ot=(0,f.A)(st,[["render",at]]);var nt=ot,lt={components:{Navbar:C,LessonList:D,Cart:B,Checkout:nt},data(){return{activePage:0,showCartPage:!1,cart:[],pages:[{link:{text:"Lessons",url:"LessonList.vue"},pageTitle:"Lessons List",content:"This is the list of lessons"},{link:{text:"About",url:"about.html"},pageTitle:"About",content:"This is the about content"},{link:{text:"Checkout",url:"Checkout.vue"},pageTitle:"Checkout",content:"This is the Checkout"}]}},methods:{async addToCart(t){this.cart.push(t),await fetch(`http://localhost:3000/api/lesson/${t._id}/decrease`,{method:"PUT"}),t.spaces--},toggleCheckout(){this.showCartPage=!this.showCartPage},async removeFromCart(t){const e=this.cart[t];await fetch(`http://localhost:3000/api/lesson/${e._id}/increase`,{method:"PUT"}),e.spaces++,this.cart.splice(t,1)},completeCheckout(){alert("Order complete!"),this.cart=[],this.showCartPage=!1}}};const rt=(0,f.A)(lt,[["render",i]]);var ct=rt;(0,s.Ef)(ct).mount("#app")}},e={};function a(s){var o=e[s];if(void 0!==o)return o.exports;var n=e[s]={exports:{}};return t[s].call(n.exports,n,n.exports,a),n.exports}a.m=t,function(){var t=[];a.O=function(e,s,o,n){if(!s){var l=1/0;for(u=0;u<t.length;u++){s=t[u][0],o=t[u][1],n=t[u][2];for(var r=!0,c=0;c<s.length;c++)(!1&n||l>=n)&&Object.keys(a.O).every(function(t){return a.O[t](s[c])})?s.splice(c--,1):(r=!1,n<l&&(l=n));if(r){t.splice(u--,1);var i=o();void 0!==i&&(e=i)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[s,o,n]}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,n,l=s[0],r=s[1],c=s[2],i=0;if(l.some(function(e){return 0!==t[e]})){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(c)var u=c(a)}for(e&&e(s);i<l.length;i++)n=l[i],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(u)},s=self["webpackChunkafter_school_lessons"]=self["webpackChunkafter_school_lessons"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],function(){return a(789)});s=a.O(s)})();
//# sourceMappingURL=app.739c2580.js.map