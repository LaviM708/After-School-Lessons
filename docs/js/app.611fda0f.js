(function(){"use strict";var e={2568:function(e,t,a){var s=a(3751),o=a(641),n=a(33);const r={class:"container mt-4"},c={class:"row"},l={key:0,class:"col-md-4"};function i(e,t,a,s,i,u){const d=(0,o.g2)("navbar"),p=(0,o.g2)("LessonList"),h=(0,o.g2)("Cart"),k=(0,o.g2)("Checkout");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.bF)(d,{pages:i.pages,"active-page":i.activePage,"nav-link-click":e=>i.activePage=e,cart:i.cart,onToggleCheckout:u.toggleCheckout},null,8,["pages","active-page","nav-link-click","cart","onToggleCheckout"]),(0,o.Lk)("div",r,[(0,o.Lk)("div",c,[(0,o.Lk)("div",{class:(0,n.C4)(i.showCartPage?"col-md-8":"col-12")},[(0,o.bF)(p,{page:i.pages[i.activePage],"add-to-cart":u.addToCart},null,8,["page","add-to-cart"])],2),i.showCartPage?((0,o.uX)(),(0,o.CE)("div",l,[(0,o.bF)(h,{cart:i.cart,onRemoveItem:u.removeFromCart},null,8,["cart","onRemoveItem"]),(0,o.bF)(k,{cart:i.cart,onCheckout:u.completeCheckout},null,8,["cart","onCheckout"])])):(0,o.Q3)("",!0)])])])}a(4114);const u={class:"navbar navbar-expand-lg navbar-dark bg-dark"},d={class:"container-fluid"},p={class:"collapse navbar-collapse justify-content-between",id:"navbarNav"},h={class:"navbar-nav"},k=["href","title","onClick"],m={class:"d-flex ms-auto"},v=["disabled"];function b(e,t,a,r,c,l){return(0,o.uX)(),(0,o.CE)("nav",u,[(0,o.Lk)("div",d,[t[1]||(t[1]=(0,o.Lk)("a",{class:"navbar-brand",href:"#"},"After School Lessons",-1)),t[2]||(t[2]=(0,o.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,o.Lk)("span",{class:"navbar-toggler-icon"})],-1)),(0,o.Lk)("div",p,[(0,o.Lk)("ul",h,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.pages,(e,t)=>((0,o.uX)(),(0,o.CE)("li",{class:"nav-item",key:t},[(0,o.Lk)("a",{class:(0,n.C4)(["nav-link",{active:a.activePage==t}]),"aria-current":"page",href:e.link.url,title:`This link goes to the ${e.link.text} page`,onClick:(0,s.D$)(e=>a.navLinkClick(t),["prevent"])},(0,n.v_)(e.link.text),11,k)]))),128))]),(0,o.Lk)("div",m,[(0,o.Lk)("button",{class:"btn btn-success",type:"button",disabled:0===a.cart.length,onClick:t[0]||(t[0]=t=>e.$emit("toggle-checkout"))}," Cart ("+(0,n.v_)(a.cart.length)+") ",9,v)])])])])}var g={props:["pages","activePage","navLinkClick","cart"],emits:["toggle-checkout"]},f=a(6262);const L=(0,f.A)(g,[["render",b]]);var C=L;const y={class:"container mt-4"},w={class:"mb-4"},x={class:"row mb-3"},T={class:"col-md-4"},P={class:"col-md-4"},E={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},_={class:"card h-100 shadow-sm"},j=["src","alt"],X={class:"card-body"},O={class:"card-title"},A={class:"card-text text-muted mb-2"},$={class:"mb-2"},F=["onClick","disabled"];function N(e,t,a,r,c,l){return(0,o.uX)(),(0,o.CE)("div",y,[(0,o.Lk)("h1",w,(0,n.v_)(a.page.pageTitle),1),(0,o.Lk)("div",x,[(0,o.Lk)("div",T,[t[3]||(t[3]=(0,o.Lk)("label",{class:"form-label"},"Sort by",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>c.sortKey=e),class:"form-select"},[...t[2]||(t[2]=[(0,o.Lk)("option",{value:"subject"},"Subject",-1),(0,o.Lk)("option",{value:"location"},"Location",-1),(0,o.Lk)("option",{value:"price"},"Price",-1),(0,o.Lk)("option",{value:"spaces"},"Spaces",-1)])],512),[[s.u1,c.sortKey]])]),(0,o.Lk)("div",P,[t[5]||(t[5]=(0,o.Lk)("label",{class:"form-label"},"Order",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>c.sortDir=e),class:"form-select"},[...t[4]||(t[4]=[(0,o.Lk)("option",{value:"asc"},"Ascending",-1),(0,o.Lk)("option",{value:"desc"},"Descending",-1)])],512),[[s.u1,c.sortDir]])])]),(0,o.Lk)("div",E,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.sortedLessons,e=>((0,o.uX)(),(0,o.CE)("div",{class:"col",key:e._id},[(0,o.Lk)("div",_,[(0,o.Lk)("img",{src:e.image,class:"card-img-top",alt:e.subject,style:{height:"180px",width:"100%","object-fit":"contain","background-color":"#f8f9fa"}},null,8,j),(0,o.Lk)("div",X,[(0,o.Lk)("h5",O,(0,n.v_)(e.subject),1),(0,o.Lk)("p",A,(0,n.v_)(e.location),1),(0,o.Lk)("p",$,[(0,o.Lk)("strong",null,"£"+(0,n.v_)(e.price),1),t[6]||(t[6]=(0,o.Lk)("br",null,null,-1)),(0,o.Lk)("small",null,"Spaces: "+(0,n.v_)(e.spaces),1)]),(0,o.Lk)("button",{class:"btn btn-primary w-100",onClick:t=>a.addToCart(e),disabled:0===e.spaces}," Add to Cart ",8,F)])])]))),128))])])}a(8111),a(1701);const V="https://backend-afterschoollessons.onrender.com";var S={name:"LessonList",props:["page","addToCart"],data(){return{lessons:[],sortKey:"subject",sortDir:"asc"}},async mounted(){const e=await fetch(`${V}/api/lessons`),t=await e.json();if(!Array.isArray(t))return console.error("Expected an array of lessons, got:",t),void(this.lessons=[]);this.lessons=t.map(e=>({_id:e._id,subject:e.topic,location:e.location,price:e.price,spaces:e.space,image:`${V}/images/${e.topic.toLowerCase().replace(/\s+/g,"-")}.png`}))},computed:{sortedLessons(){const e=this.sortKey,t="asc"===this.sortDir?1:-1;return this.lessons.slice().sort((a,s)=>{const o=a[e],n=s[e];return o<n?-1*t:o>n?1*t:0})}}};const D=(0,f.A)(S,[["render",N]]);var K=D;const I={class:"container mt-4"},U={key:0,class:"text-muted"},J={key:1,class:"list-group"},Q={class:"small text-muted"},R={class:"d-flex align-items-center gap-2"},q=["onClick"],z={class:"list-group-item d-flex justify-content-between"};function Y(e,t,a,s,r,c){return(0,o.uX)(),(0,o.CE)("div",I,[t[1]||(t[1]=(0,o.Lk)("h2",{class:"mb-3"},"Cart",-1)),0===a.cart.length?((0,o.uX)(),(0,o.CE)("p",U," Your cart is empty. ")):((0,o.uX)(),(0,o.CE)("ul",J,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.cart,(t,a)=>((0,o.uX)(),(0,o.CE)("li",{key:a,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,o.Lk)("div",null,[(0,o.Lk)("strong",null,(0,n.v_)(t.subject),1),(0,o.Lk)("div",Q,(0,n.v_)(t.location),1)]),(0,o.Lk)("div",R,[(0,o.Lk)("span",null,"£"+(0,n.v_)(t.price),1),(0,o.Lk)("button",{class:"btn btn-sm btn-outline-danger",onClick:t=>e.$emit("remove-item",a)}," Remove ",8,q)])]))),128)),(0,o.Lk)("li",z,[t[0]||(t[0]=(0,o.Lk)("strong",null,"Total",-1)),(0,o.Lk)("strong",null,"£"+(0,n.v_)(c.cartTotal),1)])]))])}a(8237);var Z={name:"Cart",props:["cart"],emits:["remove-item"],computed:{cartTotal(){return this.cart.reduce((e,t)=>e+t.price,0)}}};const B=(0,f.A)(Z,[["render",Y]]);var G=B;const H={class:"mt-4"},M={class:"mb-3"},W={key:0,class:"text-danger"},ee={class:"mb-3"},te={key:0,class:"text-danger"},ae=["disabled"];function se(e,t,a,n,r,c){return(0,o.uX)(),(0,o.CE)("div",H,[t[5]||(t[5]=(0,o.Lk)("h3",{class:"mb-3"},"Checkout",-1)),(0,o.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)((...e)=>c.handleCheckout&&c.handleCheckout(...e),["prevent"]))},[(0,o.Lk)("div",M,[t[3]||(t[3]=(0,o.Lk)("label",{class:"form-label"},"Full Name",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.name=e),type:"text",class:"form-control",placeholder:"Enter your full name",required:""},null,512),[[s.Jo,r.name]]),r.name&&!c.isNameValid?((0,o.uX)(),(0,o.CE)("small",W," Name must contain letters only. ")):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ee,[t[4]||(t[4]=(0,o.Lk)("label",{class:"form-label"},"Phone Number",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.phone=e),type:"text",class:"form-control",placeholder:"Enter your phone number",required:""},null,512),[[s.Jo,r.phone]]),r.phone&&!c.isPhoneValid?((0,o.uX)(),(0,o.CE)("small",te," Phone must contain numbers only. ")):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary w-100",disabled:!c.isNameValid||!c.isPhoneValid||0===a.cart.length}," Checkout ",8,ae)],32)])}var oe={name:"Checkout",props:["cart"],emits:["checkout"],data(){return{name:"",phone:""}},computed:{isNameValid(){return/^[A-Za-z\s]+$/.test(this.name)},isPhoneValid(){return/^[0-9]+$/.test(this.phone)}},methods:{async handleCheckout(){const e={name:this.name,phone:this.phone,items:this.cart.map(e=>({lessonId:e._id,spaces:1}))};await fetch("http://localhost:3000/api/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),this.$emit("checkout")}}};const ne=(0,f.A)(oe,[["render",se]]);var re=ne,ce={components:{Navbar:C,LessonList:K,Cart:G,Checkout:re},data(){return{activePage:0,showCartPage:!1,cart:[],pages:[{link:{text:"Lessons",url:"LessonList.vue"},pageTitle:"Lessons List",content:"This is the list of lessons"},{link:{text:"About",url:"about.html"},pageTitle:"About",content:"This is the about content"},{link:{text:"Checkout",url:"Checkout.vue"},pageTitle:"Checkout",content:"This is the Checkout"}]}},methods:{async addToCart(e){this.cart.push(e),await fetch(`https://backend-afterschoollessons.onrender.com/api/lesson/${e._id}/decrease`,{method:"PUT"}),e.spaces--},toggleCheckout(){this.showCartPage=!this.showCartPage},async removeFromCart(e){const t=this.cart[e];await fetch(`https://backend-afterschoollessons.onrender.com/api/lesson/${t._id}/increase`,{method:"PUT"}),t.spaces++,this.cart.splice(e,1)},completeCheckout(){alert("Order complete!"),this.cart=[],this.showCartPage=!1}}};const le=(0,f.A)(ce,[["render",i]]);var ie=le;(0,s.Ef)(ie).mount("#app")}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,s,o,n){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],o=e[u][1],n=e[u][2];for(var c=!0,l=0;l<s.length;l++)(!1&n||r>=n)&&Object.keys(a.O).every(function(e){return a.O[e](s[l])})?s.splice(l--,1):(c=!1,n<r&&(r=n));if(c){e.splice(u--,1);var i=o();void 0!==i&&(t=i)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[s,o,n]}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,n,r=s[0],c=s[1],l=s[2],i=0;if(r.some(function(t){return 0!==e[t]})){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(l)var u=l(a)}for(t&&t(s);i<r.length;i++)n=r[i],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},s=self["webpackChunkafter_school_lessons"]=self["webpackChunkafter_school_lessons"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],function(){return a(2568)});s=a.O(s)})();
//# sourceMappingURL=app.611fda0f.js.map