(function(){"use strict";var t={8684:function(t,e,s){var o=s(3751),n=s(641),a=s(33);const l={key:0,class:"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{background:"rgba(0,0,0,0.4)","z-index":"1050"}},i={class:"bg-white rounded shadow p-4",style:{"min-width":"360px","max-width":"480px"}},c={class:"d-flex justify-content-between align-items-center mb-2"},r={class:"mb-0"},d={key:0},u={key:1},h={key:0},m={key:1,class:"text-muted"},p={key:2,class:"list-group mb-3",style:{"max-height":"260px","overflow-y":"auto"}},k={class:"small text-muted"},b={class:"d-flex align-items-center"},v=["onClick"],g={class:"mx-2"},C=["onClick"],y=["onClick"],f={class:"d-flex justify-content-center gap-2"},L=["disabled"],w={class:"container mt-3"},x={key:0},E={key:1},F={class:"mb-3"},_={key:2},A={class:"row"},X={class:"col-md-6"},P={key:0,class:"col-md-6"};function j(t,e,s,o,j,M){const T=(0,n.g2)("navbar"),q=(0,n.g2)("LessonList"),I=(0,n.g2)("Cart"),N=(0,n.g2)("Checkout");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.bF)(T,{pages:j.pages,"active-page":j.activePage,"nav-link-click":M.handleNavClick,cart:j.cart,onOpenCart:M.openCartFromIcon},null,8,["pages","active-page","nav-link-click","cart","onOpenCart"]),j.showAddedModal.visible?((0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("div",i,[(0,n.Lk)("div",c,[(0,n.Lk)("h5",r,[j.showAddedModal.fromCartIcon?((0,n.uX)(),(0,n.CE)("span",d,"Your cart")):((0,n.uX)(),(0,n.CE)("span",u,"Item added to cart"))]),(0,n.Lk)("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:e[0]||(e[0]=(...t)=>M.closeModal&&M.closeModal(...t))})]),!j.showAddedModal.fromCartIcon&&j.showAddedModal.lessonName?((0,n.uX)(),(0,n.CE)("p",h,[(0,n.Lk)("strong",null,(0,a.v_)(j.showAddedModal.lessonName),1),e[3]||(e[3]=(0,n.eW)(" has been added to your cart. ",-1))])):(0,n.Q3)("",!0),0===j.cart.length?((0,n.uX)(),(0,n.CE)("div",m," Your cart is empty. ")):((0,n.uX)(),(0,n.CE)("ul",p,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(j.cart,(t,e)=>((0,n.uX)(),(0,n.CE)("li",{key:t.lesson._id||e,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,n.Lk)("div",null,[(0,n.Lk)("strong",null,(0,a.v_)(t.lesson.subject),1),(0,n.Lk)("div",k,(0,a.v_)(t.lesson.location),1)]),(0,n.Lk)("div",b,[(0,n.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t=>M.decreaseQuantity(e)}," − ",8,v),(0,n.Lk)("span",g,(0,a.v_)(t.quantity),1),(0,n.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t=>M.increaseQuantity(e)}," + ",8,C),(0,n.Lk)("button",{class:"btn btn-sm btn-outline-danger ms-2",onClick:t=>M.removeFromCart(e)}," Remove ",8,y)])]))),128))])),(0,n.Lk)("div",f,[(0,n.Lk)("button",{class:"btn btn-outline-secondary",onClick:e[1]||(e[1]=(...t)=>M.continueShoppingFromModal&&M.continueShoppingFromModal(...t))}," Continue shopping "),(0,n.Lk)("button",{class:"btn btn-primary",disabled:0===j.cart.length,onClick:e[2]||(e[2]=(...t)=>M.goToCheckoutFromModal&&M.goToCheckoutFromModal(...t))}," Go to checkout ",8,L)])])])):(0,n.Q3)("",!0),(0,n.Lk)("div",w,[0===j.activePage?((0,n.uX)(),(0,n.CE)("div",x,[(0,n.bF)(q,{page:j.pages[0],"add-to-cart":M.addToCart},null,8,["page","add-to-cart"])])):1===j.activePage?((0,n.uX)(),(0,n.CE)("div",E,[(0,n.Lk)("h1",F,(0,a.v_)(j.pages[1].pageTitle),1),(0,n.Lk)("p",null,(0,a.v_)(j.pages[1].content),1)])):2===j.activePage?((0,n.uX)(),(0,n.CE)("div",_,[e[5]||(e[5]=(0,n.Lk)("h1",{class:"mb-3"},"Checkout",-1)),(0,n.Lk)("div",A,[(0,n.Lk)("div",X,[(0,n.bF)(I,{cart:j.cart,onRemoveItem:M.removeFromCart,onIncreaseQty:M.increaseQuantity,onDecreaseQty:M.decreaseQuantity},null,8,["cart","onRemoveItem","onIncreaseQty","onDecreaseQty"])]),j.showCheckoutForm&&j.cart.length>0?((0,n.uX)(),(0,n.CE)("div",P,[e[4]||(e[4]=(0,n.Lk)("h2",{class:"h4 mb-3"},"Checkout",-1)),(0,n.bF)(N,{cart:j.cart,onCheckout:M.completeCheckout},null,8,["cart","onCheckout"])])):(0,n.Q3)("",!0)])])):(0,n.Q3)("",!0)])])}s(4114),s(8111),s(116);const M={class:"navbar navbar-expand-lg navbar-light bg-light",style:{padding:"0.5rem 1.2rem","border-bottom":"1px solid #ddd"}},T={class:"container"},q={class:"navbar-nav me-auto mb-2 mb-lg-0"},I=["onClick"],N=["disabled"],O={key:0,class:"badge rounded-pill bg-danger",style:{position:"absolute",top:"2px",right:"4px","font-size":"0.85rem","min-width":"18px"}};function Q(t,e,s,l,i,c){return(0,n.uX)(),(0,n.CE)("nav",M,[(0,n.Lk)("div",T,[e[3]||(e[3]=(0,n.Lk)("a",{class:"navbar-brand fw-semibold",style:{"font-size":"1.55rem","font-weight":"600"}}," After School Lessons ",-1)),(0,n.Lk)("ul",q,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.pages,(t,e)=>((0,n.uX)(),(0,n.CE)("li",{key:e,class:"nav-item"},[(0,n.Lk)("a",{href:"#",class:(0,a.C4)(["nav-link",{active:s.activePage===e}]),onClick:(0,o.D$)(t=>s.navLinkClick(e),["prevent"]),style:{"font-size":"1.15rem","font-weight":"500"}},(0,a.v_)(t.link.text),11,I)]))),128))]),(0,n.Lk)("button",{class:"btn btn-light position-relative d-flex flex-column align-items-center justify-content-center",disabled:0===s.cart.length,onClick:e[0]||(e[0]=e=>t.$emit("open-cart")),style:{width:"80px",height:"80px","border-radius":"9999px",padding:"6px"}},[e[1]||(e[1]=(0,n.Lk)("i",{class:"bi bi-cart2",style:{"font-size":"2.1rem"}},null,-1)),e[2]||(e[2]=(0,n.Lk)("span",{style:{"font-size":"0.95rem","margin-top":"3px"}},"Cart",-1)),s.cart.length>0?((0,n.uX)(),(0,n.CE)("span",O,(0,a.v_)(s.cart.length),1)):(0,n.Q3)("",!0)],8,N)])])}var $={name:"Navbar",props:["pages","activePage","navLinkClick","cart"]},S=s(6262);const V=(0,S.A)($,[["render",Q]]);var D=V;const K={class:"container mt-4"},z={class:"mb-4"},U={class:"row mb-3"},R={class:"col-md-4"},J={class:"col-md-4"},Y={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},G={class:"card h-100 shadow-sm"},W=["src","alt"],Z={class:"card-body"},B={class:"card-title"},H={class:"card-text text-muted mb-2"},tt={class:"mb-2"},et=["onClick","disabled"];function st(t,e,s,l,i,c){return(0,n.uX)(),(0,n.CE)("div",K,[(0,n.Lk)("h1",z,(0,a.v_)(s.page.pageTitle),1),(0,n.Lk)("div",U,[(0,n.Lk)("div",R,[e[3]||(e[3]=(0,n.Lk)("label",{class:"form-label"},"Sort by",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.sortKey=t),class:"form-select"},[...e[2]||(e[2]=[(0,n.Lk)("option",{value:"subject"},"Subject",-1),(0,n.Lk)("option",{value:"location"},"Location",-1),(0,n.Lk)("option",{value:"price"},"Price",-1),(0,n.Lk)("option",{value:"spaces"},"Spaces",-1)])],512),[[o.u1,i.sortKey]])]),(0,n.Lk)("div",J,[e[5]||(e[5]=(0,n.Lk)("label",{class:"form-label"},"Order",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>i.sortDir=t),class:"form-select"},[...e[4]||(e[4]=[(0,n.Lk)("option",{value:"asc"},"Ascending",-1),(0,n.Lk)("option",{value:"desc"},"Descending",-1)])],512),[[o.u1,i.sortDir]])])]),(0,n.Lk)("div",Y,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.sortedLessons,t=>((0,n.uX)(),(0,n.CE)("div",{class:"col",key:t._id},[(0,n.Lk)("div",G,[(0,n.Lk)("img",{src:t.image,class:"card-img-top",alt:t.subject,style:{height:"180px",width:"100%","object-fit":"contain","background-color":"#f8f9fa"}},null,8,W),(0,n.Lk)("div",Z,[(0,n.Lk)("h5",B,(0,a.v_)(t.subject),1),(0,n.Lk)("p",H,(0,a.v_)(t.location),1),(0,n.Lk)("p",tt,[(0,n.Lk)("strong",null,"£"+(0,a.v_)(t.price),1),e[6]||(e[6]=(0,n.Lk)("br",null,null,-1)),(0,n.Lk)("small",null,"Spaces: "+(0,a.v_)(t.spaces),1)]),(0,n.Lk)("button",{class:"btn btn-primary w-100",onClick:e=>s.addToCart(t),disabled:0===t.spaces}," Add to Cart ",8,et)])])]))),128))])])}s(1701);const ot="https://backend-afterschoollessons.onrender.com";var nt={name:"LessonList",props:["page","addToCart"],data(){return{lessons:[],sortKey:"subject",sortDir:"asc"}},async mounted(){const t=await fetch(`${ot}/api/lessons`),e=await t.json();if(!Array.isArray(e))return console.error("Expected an array of lessons, got:",e),void(this.lessons=[]);this.lessons=e.map(t=>({_id:t._id,subject:t.topic,location:t.location,price:t.price,spaces:t.space,image:`${ot}/images/${t.topic.toLowerCase().replace(/\s+/g,"-")}.png`}))},computed:{sortedLessons(){const t=this.sortKey,e="asc"===this.sortDir?1:-1;return this.lessons.slice().sort((s,o)=>{const n=s[t],a=o[t];return n<a?-1*e:n>a?1*e:0})}}};const at=(0,S.A)(nt,[["render",st]]);var lt=at;const it={class:"container mt-4"},ct={key:0,class:"text-muted"},rt={key:1,class:"list-group"},dt={class:"small text-muted"},ut={class:"d-flex align-items-center"},ht=["onClick"],mt={class:"mx-2"},pt=["onClick"],kt=["onClick"],bt={class:"list-group-item d-flex justify-content-between"};function vt(t,e,s,o,l,i){return(0,n.uX)(),(0,n.CE)("div",it,[e[1]||(e[1]=(0,n.Lk)("h2",{class:"mb-3"},"Cart",-1)),0===s.cart.length?((0,n.uX)(),(0,n.CE)("p",ct," Your cart is empty. ")):((0,n.uX)(),(0,n.CE)("ul",rt,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.cart,(e,s)=>((0,n.uX)(),(0,n.CE)("li",{key:e.lesson._id||s,class:"list-group-item d-flex justify-content-between align-items-center"},[(0,n.Lk)("div",null,[(0,n.Lk)("strong",null,(0,a.v_)(e.lesson.subject),1),(0,n.Lk)("div",dt,(0,a.v_)(e.lesson.location),1)]),(0,n.Lk)("div",ut,[(0,n.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:e=>t.$emit("decrease-qty",s)}," − ",8,ht),(0,n.Lk)("span",mt,(0,a.v_)(e.quantity),1),(0,n.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:e=>t.$emit("increase-qty",s)}," + ",8,pt),(0,n.Lk)("button",{class:"btn btn-sm btn-outline-danger ms-2",onClick:e=>t.$emit("remove-item",s)}," Remove ",8,kt)])]))),128)),(0,n.Lk)("li",bt,[e[0]||(e[0]=(0,n.Lk)("strong",null,"Total",-1)),(0,n.Lk)("span",null,"£"+(0,a.v_)(i.totalPrice.toFixed(2)),1)])]))])}s(8237);var gt={name:"Cart",props:["cart"],emits:["remove-item","increase-qty","decrease-qty"],computed:{totalPrice(){return Array.isArray(this.cart)?this.cart.reduce((t,e)=>{const s=Number(e.lesson.price)||0,o=Number(e.quantity)||0;return t+s*o},0):0}}};const Ct=(0,S.A)(gt,[["render",vt]]);var yt=Ct;const ft={class:"mt-4"},Lt={class:"mb-3"},wt={key:0,class:"text-danger"},xt={class:"mb-3"},Et={key:0,class:"text-danger"},Ft=["disabled"];function _t(t,e,s,a,l,i){return(0,n.uX)(),(0,n.CE)("div",ft,[e[5]||(e[5]=(0,n.Lk)("h3",{class:"mb-3"},"Checkout",-1)),(0,n.Lk)("form",{onSubmit:e[2]||(e[2]=(0,o.D$)((...t)=>i.handleCheckout&&i.handleCheckout(...t),["prevent"]))},[(0,n.Lk)("div",Lt,[e[3]||(e[3]=(0,n.Lk)("label",{class:"form-label"},"Full Name",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.name=t),type:"text",class:"form-control",placeholder:"Enter your full name",required:""},null,512),[[o.Jo,l.name]]),l.name&&!i.isNameValid?((0,n.uX)(),(0,n.CE)("small",wt," Name must contain letters only. ")):(0,n.Q3)("",!0)]),(0,n.Lk)("div",xt,[e[4]||(e[4]=(0,n.Lk)("label",{class:"form-label"},"Phone Number",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.phone=t),type:"text",class:"form-control",placeholder:"Enter your phone number",required:""},null,512),[[o.Jo,l.phone]]),l.phone&&!i.isPhoneValid?((0,n.uX)(),(0,n.CE)("small",Et," Phone must contain numbers only. ")):(0,n.Q3)("",!0)]),(0,n.Lk)("button",{type:"submit",class:"btn btn-primary w-100",disabled:!i.isNameValid||!i.isPhoneValid||0===s.cart.length}," Checkout ",8,Ft)],32)])}var At={name:"Checkout",props:["cart"],emits:["checkout"],data(){return{name:"",phone:""}},computed:{isNameValid(){return/^[A-Za-z\s]+$/.test(this.name)},isPhoneValid(){return/^[0-9]+$/.test(this.phone)}},methods:{async handleCheckout(){const t="https://backend-afterschoollessons.onrender.com",e={name:this.name,phone:this.phone,items:this.cart.map(t=>({lessonId:t.lesson._id,spaces:t.quantity}))};await fetch(`${t}/api/order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});for(const s of this.cart){const{lesson:e,quantity:o}=s;for(let s=0;s<o;s++)await fetch(`${t}/api/lesson/${e._id}/decrease`,{method:"PUT"})}this.$emit("checkout")}}};const Xt=(0,S.A)(At,[["render",_t]]);var Pt=Xt,jt={components:{Navbar:D,LessonList:lt,Cart:yt,Checkout:Pt},data(){return{activePage:0,cart:[],showCheckoutForm:!1,showAddedModal:{visible:!1,lessonName:"",fromCartIcon:!1},pages:[{link:{text:"Lessons",url:"LessonList.vue"},pageTitle:"Lessons List",content:"This is the list of lessons"},{link:{text:"About",url:"about.html"},pageTitle:"About",content:"This is the about content"}]}},methods:{handleNavClick(t){this.activePage=t,this.showCheckoutForm=!1},async addToCart(t){const e=0===this.cart.length,s=this.cart.find(e=>e.lesson._id===t._id);t.spaces>0&&(s?s.quantity+=1:this.cart.push({lesson:t,quantity:1}),t.spaces--),e&&this.cart.length>0&&(this.showAddedModal.visible=!0,this.showAddedModal.lessonName=t.subject,this.showAddedModal.fromCartIcon=!1)},async removeFromCart(t){const e=this.cart[t],s=e.lesson;s.spaces+=e.quantity,this.cart.splice(t,1),0===this.cart.length&&2===this.activePage&&(this.activePage=0,this.showCheckoutForm=!1)},increaseQuantity(t){const e=this.cart[t],s=e.lesson;s.spaces>0&&(e.quantity+=1,s.spaces--)},decreaseQuantity(t){const e=this.cart[t],s=e.lesson;e.quantity>1?(e.quantity-=1,s.spaces++):this.removeFromCart(t)},startCheckout(){this.cart.length>0&&(this.showCheckoutForm=!0)},continueShopping(){this.activePage=0,this.showCheckoutForm=!1},completeCheckout(){alert("Order complete!"),this.cart=[],this.activePage=0,this.showCheckoutForm=!1},closeModal(){this.showAddedModal.visible=!1},continueShoppingFromModal(){this.showAddedModal.visible=!1,this.activePage=0,this.showCheckoutForm=!1},goToCheckoutFromModal(){this.cart.length&&(this.showAddedModal.visible=!1,this.activePage=2,this.showCheckoutForm=!0)},openCartFromIcon(){this.cart.length&&(this.showAddedModal.visible=!0,this.showAddedModal.fromCartIcon=!0)}}};const Mt=(0,S.A)(jt,[["render",j]]);var Tt=Mt;(0,o.Ef)(Tt).mount("#app")}},e={};function s(o){var n=e[o];if(void 0!==n)return n.exports;var a=e[o]={exports:{}};return t[o].call(a.exports,a,a.exports,s),a.exports}s.m=t,function(){var t=[];s.O=function(e,o,n,a){if(!o){var l=1/0;for(d=0;d<t.length;d++){o=t[d][0],n=t[d][1],a=t[d][2];for(var i=!0,c=0;c<o.length;c++)(!1&a||l>=a)&&Object.keys(s.O).every(function(t){return s.O[t](o[c])})?o.splice(c--,1):(i=!1,a<l&&(l=a));if(i){t.splice(d--,1);var r=n();void 0!==r&&(e=r)}}return e}a=a||0;for(var d=t.length;d>0&&t[d-1][2]>a;d--)t[d]=t[d-1];t[d]=[o,n,a]}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,o){var n,a,l=o[0],i=o[1],c=o[2],r=0;if(l.some(function(e){return 0!==t[e]})){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(c)var d=c(s)}for(e&&e(o);r<l.length;r++)a=l[r],s.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return s.O(d)},o=self["webpackChunkafter_school_lessons"]=self["webpackChunkafter_school_lessons"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],function(){return s(8684)});o=s.O(o)})();
//# sourceMappingURL=app.e403e4a9.js.map